jQuery(function(a){var e=a("#cal_nowCoins"),i=a("#cal_needCoins"),n=a("#cal_days"),t=a("#editsubmit_btn"),s=a("#vip-m-nocoins"),d=a("#vip-m-nologin"),o=parseInt(a("#uid").text()),l=a("#buyVipFail"),r=a("#buyVipSuccess"),c=a("#vip-m-buy");if(!o)return d.slideDown(),void t.attr("disabled","disabled").addClass("disabled");var p=function(){var a=parseInt(e.val())||0,n=parseInt(i.val())||0;return 0!==n?n>a?(s.slideDown(),!1):(s.hide(),!0):void 0};a(".m-days").find("label").click(function(){i.val(a(this).data("need_coins")),n.val(a(this).data("buy_days")),a(this).addClass("on").siblings("label").removeClass("on").find("input:radio[name=days]").attr("checked",!1),a(this).find("input:radio[name=days]").attr("checked",!0),n.val(a(this).find("input:radio[name=days]").val()),p()}),$showVIPDateSpan=a(".vip-m-container").find("span.ex"),$showVIPDateB=a(".vip-m-container").find("b#ex");var u=function(a){var a=parseInt(n.val()),e=0;e=$showVIPDateB[0]?new Date($showVIPDateB.html()).getTime():(new Date).getTime();var i=e+24*a*60*60*1e3,t=new Date(i),s=t.getFullYear(),d=t.getMonth()+1,o=t.getDate(),l=s+"-"+d+"-"+o;$showVIPDateB[0]?$showVIPDateB.html(l):$showVIPDateSpan.html("<em>有效期至:</em><b id='ex'>"+l+"</b>")},v=a("form#buygroupform");t.click(function(){if(p()){var e="home.php?mod=spacecp&ac=usergroup&do=buy&groupid=22&inajax=1",i={days:n.val()};v.find("input").each(function(){i[a(this).attr("name")]=a(this).val()}),a.post(e,i,function(a){a=a?JSON.parse(a):{},1===a.code?(c.slideUp(600),r.slideDown(600),u(n.val())):(c.slideUp(600),l.slideDown(600))})}})});